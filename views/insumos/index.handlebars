<h3>Insumos</h3>
<div class="card">
    <div class="card-body">
        <div >
            Escolha as colunas:
            
            <div class="btn-group btn-group-toggle btn-group-sm" data-toggle="buttons">
            <label class="btn btn-secondary active">
                <input type="checkbox" name="options" autocomplete="on" checked>
                <a class="toggle-vis" data-column="0">Origem</a>
            </label>
            <label class="btn btn-secondary active">
                <input type="checkbox" name="options" autocomplete="on" checked>
                <a class="toggle-vis" data-column="1">Código</a>
            </label>
            <label class="btn btn-secondary active">
                <input type="checkbox" name="options" autocomplete="on" checked>
                <a class="toggle-vis" data-column="2">Descrição</a>
            </label>
            <label class="btn btn-secondary active">
                <input type="checkbox" name="options" autocomplete="on" checked>
                <a class="toggle-vis" data-column="3">Unidade</a>
            </label>
            <label class="btn btn-secondary active">
                <input type="checkbox" name="options" autocomplete="on" checked>
                <a class="toggle-vis" data-column="4">Preço</a>
            </label>
            <label class="btn btn-secondary active">
                <input type="checkbox" name="options" autocomplete="on" checked>
                <a class="toggle-vis" data-column="5">Observações</a>
            </label>
            </div>      
        </div>
        <table id="table-insumos" class="table table-striped table-sm" style="font-size: 13px; width: 100%">
            <thead class="thead-dark">
                <tr>
                    <th>Origem</th>
                    <th>Código</th>
                    <th>Descrição</th>
                    <th>Unidade</th>
                    <th>Preço</th>
                    <th>Observações</th>
                    <th >Ações</th>
                </tr>
            </thead>
            
            <tbody id="tbody-insumos" hidden>   
                        
                {{#each insumos}}
                <tr>
                    <td>{{base_origem.abreviacao}}</td>
                    <td>{{codigo_origem}}</td>
                    <td>{{descricao}}</td>
                    <td>{{unidade_medida}}</td>
                    <td>{{preco_mediano}}</td>
                    <td>{{observacao}}</td>
                    <td>
                        <form action="/insumos/delete/" method="POST">
                        <a href="/insumos/edit/{{_id}}" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="Editar"><i class="material-icons md-18">edit</i></a>
                        <input type="hidden" name="id" value="{{_id}}">                    
                        <button class="btn btn-light btn-sm" type="submit" data-toggle="tooltip" data-placement="top" title="Remover"><i class="material-icons md-18">remove_circle</i></button>
                        </form>
                    </td>
                </tr>
                {{else}}
                <tr>
                <td><h5>Nenhum insumo cadastrado.</h5></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                </tr>
                {{/each}}            
            </tbody>        
            <tfoot class="thead-dark">
                <tr>
                    <th>Origem</th>
                    <th>Código</th>
                    <th>Descrição</th>
                    <th>Unidade</th>
                    <th>Preço</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </tfoot> 
        </table>
        <div id="spinner-insumos"class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        <br>
        <a href="/insumos/add"><button class="btn btn-success">Novo</button></a>
    </div>
</div>




<script>  
    $(document).ready( function () {
        var table = $('#table-insumos').DataTable({
            "language": {"url": '/js/datatables-ptBR.js'},
        });

        $('a.toggle-vis').on( 'click', function (e) {
            e.preventDefault();
    
            // Get the column API object
            var column = table.column( $(this).attr('data-column') );
    
            // Toggle the visibility
            column.visible( ! column.visible() );
        });

        document.getElementById("tbody-insumos").hidden = false;                
        document.getElementById("spinner-insumos").remove();
        
    });
</script>

